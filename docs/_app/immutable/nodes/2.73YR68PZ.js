import{a as q,f as A,c as ne}from"../chunks/mJAKzCCg.js";import{i as F}from"../chunks/C5YMPBah.js";import{a as ce,J as De,h as V,R as pe,i as Me,K as Ve,w as c,O as Pe,P as We,Q as xe,S as ve,e as oe,ai as Ye,aJ as ze,au as _e,c as Ue,aR as z,b as me,s as Fe,a2 as Be,aS as Je,aH as he,aT as je,aU as Ge,V as U,ah as we,aV as Ke,r as ke,p as Le,aW as be,aX as Xe,j as Ze,d as $e,aE as et,C as B,D as Z,G as y,I as N,H as f,x as h,g as m,E as R,F as J,aY as j,W as G,aZ as ie}from"../chunks/DbZbHsZL.js";import{s as C,e as P}from"../chunks/B9hSqY2-.js";import{p as Q,i as M,s as Te,a as Ne}from"../chunks/C6naHLG3.js";import{r as ae,s as re,a as Oe,b as se,c as tt}from"../chunks/DEKplsl5.js";import{w as at}from"../chunks/DVS1T13S.js";function rt(e,a,t){for(var r=[],v=a.length,n,p=a.length,u=0;u<v;u++){let l=a[u];Le(l,()=>{if(n){if(n.pending.delete(l),n.done.add(l),n.pending.size===0){var b=e.outrogroups;fe(he(n.done)),b.delete(n),b.size===0&&(e.outrogroups=null)}}else p-=1},!1)}if(p===0){var s=r.length===0&&t!==null;if(s){var i=t,o=i.parentNode;Ze(o),o.append(i),e.items.clear()}fe(a,!s)}else n={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(n)}function fe(e,a=!0){for(var t=0;t<e.length;t++)$e(e[t],a)}var qe;function le(e,a,t,r,v,n=null){var p=e,u=new Map;{var s=e;p=V?pe(Me(s)):s.appendChild(ce())}V&&Ve();var i=null,o=Be(()=>{var k=t();return Je(k)?k:k==null?[]:he(k)}),l,b=!0;function g(){S.fallback=i,it(S,l,p,a,r),i!==null&&(l.length===0?(i.f&z)===0?ke(i):(i.f^=z,te(i,null,p)):Le(i,()=>{i=null}))}var d=De(()=>{l=c(o);var k=l.length;let L=!1;if(V){var w=Pe(p)===We;w!==(k===0)&&(p=xe(),pe(p),ve(!1),L=!0)}for(var T=new Set,I=Ue,E=Fe(),H=0;H<k;H+=1){V&&oe.nodeType===Ye&&oe.data===ze&&(p=oe,L=!0,ve(!1));var x=l[H],_=r(x,H),O=b?null:u.get(_);O?(O.v&&_e(O.v,x),O.i&&_e(O.i,H),E&&I.skipped_effects.delete(O.e)):(O=lt(u,b?p:qe??=ce(),x,_,H,v,a,t),b||(O.e.f|=z),u.set(_,O)),T.add(_)}if(k===0&&n&&!i&&(b?i=me(()=>n(p)):(i=me(()=>n(qe??=ce())),i.f|=z)),V&&k>0&&pe(xe()),!b)if(E){for(const[W,$]of u)T.has(W)||I.skipped_effects.add($.e);I.oncommit(g),I.ondiscard(()=>{})}else g();L&&ve(!0),c(o)}),S={effect:d,items:u,outrogroups:null,fallback:i};b=!1,V&&(p=oe)}function ee(e){for(;e!==null&&(e.f&Xe)===0;)e=e.next;return e}function it(e,a,t,r,v){var n=a.length,p=e.items,u=ee(e.effect.first),s,i=null,o=[],l=[],b,g,d,S;for(S=0;S<n;S+=1){if(b=a[S],g=v(b,S),d=p.get(g).e,e.outrogroups!==null)for(const _ of e.outrogroups)_.pending.delete(d),_.done.delete(d);if((d.f&z)!==0)if(d.f^=z,d===u)te(d,null,t);else{var k=i?i.next:u;d===e.effect.last&&(e.effect.last=d.prev),d.prev&&(d.prev.next=d.next),d.next&&(d.next.prev=d.prev),Y(e,i,d),Y(e,d,k),te(d,k,t),i=d,o=[],l=[],u=ee(i.next);continue}if((d.f&be)!==0&&ke(d),d!==u){if(s!==void 0&&s.has(d)){if(o.length<l.length){var L=l[0],w;i=L.prev;var T=o[0],I=o[o.length-1];for(w=0;w<o.length;w+=1)te(o[w],L,t);for(w=0;w<l.length;w+=1)s.delete(l[w]);Y(e,T.prev,I.next),Y(e,i,T),Y(e,I,L),u=L,i=I,S-=1,o=[],l=[]}else s.delete(d),te(d,u,t),Y(e,d.prev,d.next),Y(e,d,i===null?e.effect.first:i.next),Y(e,i,d),i=d;continue}for(o=[],l=[];u!==null&&u!==d;)(s??=new Set).add(u),l.push(u),u=ee(u.next);if(u===null)continue}(d.f&z)===0&&o.push(d),i=d,u=ee(d.next)}if(e.outrogroups!==null){for(const _ of e.outrogroups)_.pending.size===0&&(fe(he(_.done)),e.outrogroups?.delete(_));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||s!==void 0){var E=[];if(s!==void 0)for(d of s)(d.f&be)===0&&E.push(d);for(;u!==null;)(u.f&be)===0&&u!==e.fallback&&E.push(u),u=ee(u.next);var H=E.length;if(H>0){var x=n===0?t:null;rt(e,E,x)}}}function lt(e,a,t,r,v,n,p,u){var s=(p&je)!==0?(p&Ge)===0?U(t,!1,!1):we(t):null,i=(p&Ke)!==0?we(v):null;return{v:s,i,e:me(()=>(n(a,s??t,i??v,u),()=>{e.delete(r)}))}}function te(e,a,t){if(e.nodes)for(var r=e.nodes.start,v=e.nodes.end,n=a&&(a.f&z)===0?a.nodes.start:t;r!==null;){var p=et(r);if(n.before(r),r===v)return;r=p}}function Y(e,a,t){a===null?e.effect.first=t:a.next=t,t===null?e.effect.last=a:t.prev=a}function ot(e,a,t){var r=e==null?"":""+e;return r===""?null:r}function nt(e,a){return e==null?null:String(e)}function st(e,a,t,r,v,n){var p=e.__className;if(V||p!==t||p===void 0){var u=ot(t);(!V||u!==e.getAttribute("class"))&&(u==null?e.removeAttribute("class"):e.className=u),e.__className=t}return n}function dt(e,a,t,r){var v=e.__style;if(V||v!==a){var n=nt(a);(!V||n!==e.getAttribute("style"))&&(n==null?e.removeAttribute("style"):e.style.cssText=n),e.__style=a}return r}const D={id:"dev-questionnaire-v1",title:"Developer Questionnaire",intro:`This questionnaire supports an apprenticeship project examining how service documentation, operational knowledge, and monitoring practices are currently managed across the Library development environment. The aim is to understand current practice and constraints, not to assess individual performance. Responses will be analysed in aggregate to identify patterns, risks, and opportunities for improvement.

How to submit: complete the questions and click Submit at the end. Responses are not anonymous (they are returned to me), but findings will be written up only as aggregated themes/patterns and not attributed to individuals. Progress is saved, so you can close the form and come back to it later if needed. If you’d rather add context outside the form, feel free to message me directly.`,estimatedMinutes:"12–18",sections:[{id:"context",title:"Section 1 — Context",questions:[{id:"1.1",displayLabel:"Q1.1",type:"single",prompt:"Your role",required:!0,allowOtherText:!0,options:[{id:"software_dev",label:"Software Developer"},{id:"senior_software_dev",label:"Senior Software Developer"},{id:"other",label:"Other (please specify)"}]},{id:"1.2",displayLabel:"Q1.2",type:"single",prompt:"How long have you worked in the Library development environment?",required:!0,options:[{id:"lt_1",label:"Less than 1 year"},{id:"1_3",label:"1–3 years"},{id:"3_5",label:"3–5 years"},{id:"gt_5",label:"More than 5 years"}]},{id:"1.3",displayLabel:"Q1.3",type:"multi",prompt:"Which technologies do you mainly work with?",help:"Select all that apply",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"js_node",label:"JavaScript / Node"},{id:"python",label:"Python"},{id:"php",label:"PHP"},{id:"java",label:"Java"},{id:"dotnet",label:".NET"},{id:"sql",label:"Databases / SQL"},{id:"devops",label:"Infrastructure / DevOps"},{id:"other",label:"Other (please specify)"}]}]},{id:"what_document",title:"Section 2 — What do you document, and why?",questions:[{id:"2.1",displayLabel:"Q2.1",type:"multi",prompt:"What do you usually write documentation for?",help:"Select all that apply",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"onboarding",label:"Onboarding new developers"},{id:"incidents",label:"Supporting incidents or outages"},{id:"handover",label:"Handover / cover when someone is unavailable"},{id:"architecture",label:"Explaining system architecture or design"},{id:"personal_ref",label:"Personal reference"},{id:"compliance",label:"Compliance or audit"},{id:"rarely",label:"I rarely write documentation"},{id:"not_applicable",label:"Not applicable / I don’t write documentation"},{id:"other",label:"Other (free text)"}]},{id:"2.2",displayLabel:"Q2.2",type:"multi",prompt:"Who do you primarily expect to read the documentation you write?",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"myself",label:"Myself"},{id:"devs",label:"Other developers"},{id:"support",label:"Support teams"},{id:"managers",label:"Managers"},{id:"not_sure",label:"I’m not sure"},{id:"not_applicable",label:"Not applicable / I don’t write documentation"},{id:"other",label:"Other (free text)"}]},{id:"2.3",displayLabel:"Q2.3",type:"rating",prompt:"How clear do you feel the overall purpose of documentation is within the team?",required:!0,min:1,max:5,minLabel:"Very unclear",maxLabel:"Very clear"}]},{id:"timing",title:"Section 3 — Documentation timing and triggers",questions:[{id:"3.1",displayLabel:"Q3.1",type:"multi",prompt:"When do you usually create or update documentation for a service?",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"before",label:"Before development begins (e.g. planning or design)"},{id:"during",label:"During development"},{id:"after",label:"After development / once deployed"},{id:"only_when_wrong",label:"Only when something goes wrong"},{id:"rarely",label:"Rarely or never"},{id:"depends",label:"It depends on the service"},{id:"not_applicable",label:"Not applicable / I don’t write documentation"},{id:"other",label:"Other (free text)"}]},{id:"3.2",displayLabel:"Q3.2",type:"multi",prompt:"What typically triggers you to write or update documentation?",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"new_service",label:"Starting a new service"},{id:"significant_change",label:"A significant change or refactor"},{id:"incident",label:"An incident or outage"},{id:"asked",label:"Someone asking for information"},{id:"onboarding",label:"Onboarding a new team member"},{id:"time",label:"Time becoming available"},{id:"no_trigger",label:"No clear trigger"},{id:"other",label:"Other (free text)"}]}]},{id:"where_docs_live",title:"Section 4 — Where documentation lives",questions:[{id:"4.1",displayLabel:"Q4.1",type:"multi",prompt:"Where do you usually document the services you work on?",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"repos",label:"Code repositories (README files, docs folders, etc.)"},{id:"lapcat",label:"Lapcat"},{id:"wiki",label:"Internal wiki / intranet"},{id:"tickets",label:"Tickets or issue trackers"},{id:"personal_notes",label:"Personal notes"},{id:"not_documented",label:"Not documented"},{id:"not_applicable",label:"Not applicable / I don’t manage documentation"},{id:"other",label:"Other (free text)"}]},{id:"4.2",displayLabel:"Q4.2",type:"rating",prompt:"How confident are you that documentation for your services is up to date?",required:!0,min:1,max:5},{id:"4.3",displayLabel:"Q4.3",type:"rating",prompt:"How confident are you that documentation for your services is easy for others to find?",required:!0,min:1,max:5},{id:"4.4",displayLabel:"Q4.4",type:"rating",prompt:"How usable is existing documentation during an incident or urgent issue?",required:!0,min:1,max:5,minLabel:"Not usable",maxLabel:"Very usable"}]},{id:"lapcat",title:"Section 5 — Lapcat awareness and usage",questions:[{id:"5.1",displayLabel:"Q5.1",type:"single",prompt:"Before this questionnaire, were you aware of Lapcat?",required:!0,options:[{id:"yes",label:"Yes"},{id:"no",label:"No"}]},{id:"5.2",displayLabel:"Q5.2",type:"single",prompt:"Have you ever updated Lapcat yourself?",required:!0,options:[{id:"yes",label:"Yes"},{id:"no",label:"No"},{id:"not_sure",label:"Not sure"}]},{id:"5.3",displayLabel:"Q5.3",type:"multi",prompt:"What do you believe Lapcat is mainly used for?",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"services_exist",label:"Recording what services exist"},{id:"ownership",label:"Identifying service ownership"},{id:"dependencies",label:"Tracking dependencies"},{id:"incident_support",label:"Incident support"},{id:"compliance",label:"Compliance or audit"},{id:"not_sure",label:"I’m not sure"},{id:"not_used",label:"I have not used Lapcat"},{id:"other",label:"Other (free text)"}]},{id:"5.4",displayLabel:"Q5.4",type:"rating",prompt:"How accurate do you believe Lapcat currently is?",required:!0,min:1,max:5,minLabel:"Not accurate",maxLabel:"Very accurate"}]},{id:"tests",title:"Section 6 — Tests as supporting artefacts",questions:[{id:"6.1",displayLabel:"Q6.1",type:"single",prompt:"Across the apps/services you work on, approximately what proportion have automated tests?",required:!0,options:[{id:"0",label:"0%"},{id:"1_25",label:"1–25%"},{id:"26_50",label:"26–50%"},{id:"51_75",label:"51–75%"},{id:"76_100",label:"76–100%"},{id:"not_sure",label:"Not sure"}]},{id:"6.2",displayLabel:"Q6.2",type:"multi",prompt:"What types of automated tests are used in any of those apps/services?",help:"Select all that apply",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"unit",label:"Unit tests"},{id:"integration",label:"Integration tests"},{id:"e2e",label:"End-to-end tests"},{id:"not_sure",label:"Not sure"},{id:"other",label:"Other (please specify)"}]},{id:"6.3",displayLabel:"Q6.3",type:"multi",prompt:"What do you mainly rely on tests for (where they exist)?",help:"Select all that apply",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"no_break",label:"Checking changes don’t break existing behaviour"},{id:"understand",label:"Understanding how the system is meant to work"},{id:"refactor",label:"Supporting refactoring"},{id:"safe_changes",label:"Enabling other developers to make changes safely"},{id:"deploy_conf",label:"Providing confidence during deployment"},{id:"dont_rely",label:"I don’t rely on tests"},{id:"other",label:"Other (free text)"}]},{id:"6.4",displayLabel:"Q6.4",type:"rating",prompt:"To what extent do tests act as documentation for the apps/services you work on?",required:!0,min:1,max:5,minLabel:"Not at all",maxLabel:"Primary source of truth"},{id:"6.5",displayLabel:"Q6.5",type:"single",prompt:"If a test fails, how visible is that failure to others?",required:!0,options:[{id:"high",label:"Highly visible (e.g. CI alerts, dashboards)"},{id:"devs_only",label:"Visible to developers only"},{id:"not_visible",label:"Not very visible"},{id:"na",label:"Not applicable / no tests"}]}]},{id:"monitoring",title:"Section 7 — Monitoring and issue awareness",questions:[{id:"7.1",displayLabel:"Q7.1",type:"multi",prompt:"How do you usually become aware of issues (e.g. errors, crashes, performance problems) in the services you work on?",help:"Select all that apply",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"told",label:"A user or colleague tells me"},{id:"ticket",label:"A ticket is raised (e.g. support desk, email)"},{id:"dev_test",label:"I notice it during development or testing"},{id:"alerts",label:"Automated alerts (e.g. monitoring tools, log alerts)"},{id:"dashboards",label:"Dashboards or status pages"},{id:"check_logs",label:"I proactively check logs or metrics"},{id:"not_aware",label:"I’m not usually aware unless someone contacts me"},{id:"other",label:"Other (free text)"}]},{id:"7.2",displayLabel:"Q7.2",type:"single",prompt:"Who is primarily responsible for monitoring the services you work on?",required:!0,options:[{id:"me_team",label:"Me / the development team"},{id:"other_internal",label:"Another internal team"},{id:"central_it",label:"Central IT / organisational monitoring"},{id:"shared",label:"Shared responsibility"},{id:"not_defined",label:"Not clearly defined"},{id:"not_sure",label:"Not sure"}]},{id:"7.3",displayLabel:"Q7.3",type:"rating",prompt:"How confident are you that issues with your services would be detected quickly if no one reported them?",required:!0,min:1,max:5,minLabel:"Not confident",maxLabel:"Very confident"},{id:"7.4",displayLabel:"Q7.4",type:"single",prompt:"If an issue occurred outside working hours, how likely is it that someone would notice promptly?",required:!0,options:[{id:"very_likely",label:"Very likely"},{id:"somewhat",label:"Somewhat likely"},{id:"unlikely",label:"Unlikely"},{id:"not_sure",label:"Not sure"},{id:"na",label:"Not applicable"}]},{id:"7.5",displayLabel:"Q7.5",type:"single",prompt:"After an incident, are documentation or monitoring usually updated?",required:!0,options:[{id:"yes",label:"Yes, consistently"},{id:"sometimes",label:"Sometimes"},{id:"rarely",label:"Rarely"},{id:"no",label:"No"},{id:"na",label:"Not applicable / unsure"}]},{id:"7.6",displayLabel:"Q7.6",type:"single",prompt:"Are there services where only one person would realistically know how to diagnose a problem?",required:!0,options:[{id:"yes",label:"Yes"},{id:"no",label:"No"},{id:"not_sure",label:"Not sure"}]},{id:"7.7",displayLabel:"Q7.7",type:"single",prompt:"Do you assume that monitoring for your services exists outside your team?",required:!0,options:[{id:"yes",label:"Yes"},{id:"no",label:"No"},{id:"not_sure",label:"Not sure"}]}]},{id:"resilience",title:"Section 8 — Resilience (handover and coverage)",questions:[{id:"8.1",displayLabel:"Q8.1",type:"rating",prompt:"If you were unexpectedly unavailable, how confident are you that someone else could understand what the service does?",required:!0,min:1,max:5},{id:"8.2",displayLabel:"Q8.2",type:"rating",prompt:"If you were unexpectedly unavailable, how confident are you that someone else could diagnose an issue if it failed?",required:!0,min:1,max:5}]},{id:"constraints_reflection",title:"Section 9 — Constraints and reflection",questions:[{id:"9.1",displayLabel:"Q9.1",type:"text",prompt:"Based on your experience or observations, what usually makes documentation hard to keep up to date?",required:!0,multiline:!0},{id:"9.2",displayLabel:"Q9.2",type:"text",prompt:"From your perspective, what is the biggest risk if service documentation or information is missing or outdated?",required:!0,multiline:!0},{id:"9.3",displayLabel:"Q9.3",type:"text",prompt:"If one thing could be improved about how service information is recorded or shared, what should it be?",required:!0,multiline:!0}]},{id:"end_user_visibility",title:"Section 10 — End-user visibility and feedback",description:"These questions look at user-facing visibility: how end users discover services and how problems are surfaced back to developers.",questions:[{id:"10.1",displayLabel:"Q10.1",type:"multi",prompt:"Across the apps/services you work on, how do end users typically discover or access them?",help:"Select all that apply",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"library_website",label:"Library website links/pages"},{id:"portal",label:"University portal / MyManchester / intranet links"},{id:"direct_url",label:"Direct URL / bookmark"},{id:"vendor_platform",label:"Vendor / third-party platform"},{id:"embedded_in_other",label:"Embedded in another system (integration)"},{id:"email_comms",label:"Shared via email/comms (links in messages)"},{id:"not_sure",label:"Not sure"},{id:"varies",label:"Varies a lot by service"},{id:"other",label:"Other (free text)"}]},{id:"10.2",displayLabel:"Q10.2",type:"multi",prompt:"How do end users typically report issues or request help for the apps/services you work on?",help:"Select all that apply",required:!0,minSelect:1,allowOtherText:!0,options:[{id:"support_ticket",label:"Support desk / ticket system"},{id:"email",label:"Email to a shared mailbox/team"},{id:"phone_in_person",label:"Phone / in-person support"},{id:"in_app_feedback",label:"In-app feedback form / bug report"},{id:"vendor_support",label:"Directly to vendor / third party"},{id:"informal",label:"Informal (e.g. Teams message / ask someone they know)"},{id:"no_clear_route",label:"No clear route / ad-hoc"},{id:"not_sure",label:"Not sure"},{id:"varies",label:"Varies a lot by service"},{id:"other",label:"Other (free text)"}]},{id:"10.3",displayLabel:"Q10.3",type:"rating",prompt:"How clear is the user-facing route for reporting issues for the apps/services you work on?",required:!0,min:1,max:5,minLabel:"Very unclear",maxLabel:"Very clear"},{id:"10.4",displayLabel:"Q10.4",type:"single",prompt:"Is there any user-facing service status / maintenance information for the apps/services you work on (e.g. status page, banner, outage comms)?",required:!0,options:[{id:"yes_consistent",label:"Yes, consistently"},{id:"sometimes",label:"Sometimes / depends on the service"},{id:"no",label:"No"},{id:"not_sure",label:"Not sure"}]},{id:"10.5",displayLabel:"Q10.5",type:"rating",prompt:"How confident are you that end users would know what to do if a service they use was failing or degraded?",required:!0,min:1,max:5,minLabel:"Not confident",maxLabel:"Very confident"}]}]},Se=`${D.id}:state`;function Ie(){return new Date().toISOString()}function ut(e){if(!e)return null;try{const a=JSON.parse(e);return!a||a.version!==1?null:a}catch{return null}}function Qe(){const e=Ie();return{version:1,startedAt:e,lastSavedAt:e,answers:{}}}function ct(){const e=Qe(),a=ut(localStorage.getItem(Se))??e,t=at(a);return t.subscribe(r=>{try{localStorage.setItem(Se,JSON.stringify(r))}catch{}}),t}const de=ct();function pt(e,a,t){de.update(r=>{const v=Ie();return r.answers[e]={value:a,otherText:t,updatedAt:v},r.lastSavedAt=v,r})}function vt(){de.set(Qe())}function bt(){return D.sections.flatMap(e=>e.questions)}function mt(e,a){if(!e.required&&!a||!a)return!1;const t=a.value;switch(e.type){case"text":return typeof t=="string"&&t.trim().length>0;case"rating":return typeof t=="number"&&t>=e.min&&t<=e.max;case"single":return typeof t!="string"||t.length===0?!1:e.allowOtherText&&t==="other"?(a.otherText??"").trim().length>0:!0;case"multi":{if(!Array.isArray(t))return!1;const r=e.required?e.minSelect??1:0;return t.length<r?!1:e.allowOtherText&&t.includes("other")?(a.otherText??"").trim().length>0:!0}}}function ft(e){const t=bt().filter(n=>n.required!==!1),r=t.filter(n=>mt(n,e.answers[n.id])),v=t.length===0?0:Math.round(r.length/t.length*100);return{answered:r.length,total:t.length,pct:v}}var ht=A('<input class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400" placeholder="Please specify…"/>'),yt=A('<label class="flex cursor-pointer items-center gap-3 rounded-lg border border-slate-200 bg-white px-3 py-2 hover:bg-slate-50"><input type="radio" class="h-4 w-4"/> <span class="text-sm text-slate-800"> </span></label> <!>',1),gt=A('<div class="space-y-2"></div>');function xt(e,a){B(a,!1);let t=Q(a,"question",8),r=Q(a,"value",8),v=Q(a,"otherText",8),n=Q(a,"onChange",8);function p(i){n()(i,i==="other"?v():void 0)}function u(i){n()(r()??"other",i)}F();var s=gt();le(s,5,()=>(h(t()),m(()=>t().options)),i=>i.id,(i,o)=>{var l=yt(),b=Z(l),g=y(b);ae(g);var d=N(g,2),S=y(d,!0);f(d),f(b);var k=N(b,2);{var L=w=>{var T=ht();ae(T),R(()=>se(T,v())),P("input",T,I=>u(I.currentTarget.value)),q(w,T)};M(k,w=>{h(t()),c(o),h(r()),m(()=>t().allowOtherText&&c(o).id==="other"&&r()==="other")&&w(L)})}R(()=>{re(g,"name",(h(t()),m(()=>t().id))),Oe(g,(h(r()),c(o),m(()=>r()===c(o).id))),C(S,(c(o),m(()=>c(o).label)))}),P("change",g,()=>p(c(o).id)),q(i,l)}),f(s),q(e,s),J()}var _t=A('<input class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400" placeholder="Please specify…"/>'),wt=A('<label class="flex cursor-pointer items-center gap-3 rounded-lg border border-slate-200 bg-white px-3 py-2 hover:bg-slate-50"><input type="checkbox" class="h-4 w-4"/> <span class="text-sm text-slate-800"> </span></label> <!>',1),qt=A('<div class="space-y-2"></div>');function St(e,a){B(a,!1);const t=U();let r=Q(a,"question",8),v=Q(a,"value",8),n=Q(a,"otherText",8),p=Q(a,"onChange",8);function u(o){const l=c(t).includes(o)?c(t).filter(b=>b!==o):[...c(t),o];p()(l,l.includes("other")?n():void 0)}function s(o){const l=c(t).includes("other")?c(t):[...c(t),"other"];p()(l,o)}j(()=>h(v()),()=>{G(t,Array.isArray(v())?v():[])}),ie(),F();var i=qt();le(i,5,()=>(h(r()),m(()=>r().options)),o=>o.id,(o,l)=>{var b=wt(),g=Z(b),d=y(g);ae(d);var S=N(d,2),k=y(S,!0);f(S),f(g);var L=N(g,2);{var w=T=>{var I=_t();ae(I),R(()=>se(I,n())),P("input",I,E=>s(E.currentTarget.value)),q(T,I)};M(L,T=>{h(r()),c(l),c(t),m(()=>r().allowOtherText&&c(l).id==="other"&&c(t).includes("other"))&&T(w)})}R(T=>{Oe(d,T),C(k,(c(l),m(()=>c(l).label)))},[()=>(c(t),c(l),m(()=>c(t).includes(c(l).id)))]),P("change",d,()=>u(c(l).id)),q(o,b)}),f(i),q(e,i),J()}var kt=A('<button type="button"> </button>'),Lt=A('<div class="flex justify-between text-xs text-slate-600"><span> </span> <span> </span></div>'),Tt=A('<div class="flex flex-col gap-2"><div class="flex flex-wrap gap-2"></div> <!></div>');function Nt(e,a){B(a,!1);const t=U();let r=Q(a,"question",8),v=Q(a,"value",8),n=Q(a,"onChange",8);j(()=>h(v()),()=>{G(t,typeof v()=="number"?v():0)}),ie(),F();var p=Tt(),u=y(p);le(u,5,()=>(h(r()),m(()=>Array(r().max-r().min+1).fill(0).map((o,l)=>r().min+l))),o=>o,(o,l)=>{var b=kt(),g=y(b,!0);f(b),R(()=>{st(b,1,`min-w-10 rounded-lg border px-3 py-2 text-sm font-medium transition
					${c(t)===c(l)?"border-slate-900 bg-slate-900 text-white":"border-slate-200 bg-white text-slate-800 hover:bg-slate-50"}`),re(b,"aria-pressed",c(t)===c(l)),C(g,c(l))}),P("click",b,()=>n()(c(l))),q(o,b)}),f(u);var s=N(u,2);{var i=o=>{var l=Lt(),b=y(l),g=y(b,!0);f(b);var d=N(b,2),S=y(d,!0);f(d),f(l),R(()=>{C(g,(h(r()),m(()=>r().minLabel??""))),C(S,(h(r()),m(()=>r().maxLabel??"")))}),q(o,l)};M(s,o=>{h(r()),m(()=>r().minLabel||r().maxLabel)&&o(i)})}f(p),q(e,p),J()}var Ot=A('<textarea class="min-h-24 w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400"></textarea>'),It=A('<input class="w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm outline-none focus:border-slate-400"/>');function Qt(e,a){B(a,!1);const t=U();let r=Q(a,"question",8),v=Q(a,"value",8),n=Q(a,"onChange",8);j(()=>h(v()),()=>{G(t,typeof v()=="string"?v():"")}),ie(),F();var p=ne(),u=Z(p);{var s=o=>{var l=Ot();tt(l),R(()=>{re(l,"placeholder",(h(r()),m(()=>r().placeholder??"Type your answer…"))),se(l,c(t))}),P("input",l,b=>n()(b.currentTarget.value)),q(o,l)},i=o=>{var l=It();ae(l),R(()=>{re(l,"placeholder",(h(r()),m(()=>r().placeholder??"Type your answer…"))),se(l,c(t))}),P("input",l,b=>n()(b.currentTarget.value)),q(o,l)};M(u,o=>{h(r()),m(()=>r().multiline)?o(s):o(i,!1)})}q(e,p),J()}var At=A('<span class="ml-2 text-xs font-semibold text-slate-500">Required</span>'),Et=A('<div class="mt-1 text-xs text-slate-600"> </div>'),Ct=A('<div class="rounded-xl border border-slate-100 bg-slate-50 p-4"><div class="flex items-start justify-between gap-3"><div><div class="text-sm font-medium text-slate-900"> <!></div> <!></div></div> <div class="mt-3"><!></div></div>');function Rt(e,a){B(a,!1);const t=()=>Te(de,"$quizState",r),[r,v]=Ne(),n=U(),p=U(),u=U();let s=Q(a,"question",8);function i(x,_){pt(s().id,x,_)}j(()=>(t(),h(s())),()=>{G(n,t().answers[s().id])}),j(()=>c(n),()=>{G(p,c(n)?.value)}),j(()=>c(n),()=>{G(u,c(n)?.otherText??"")}),ie(),F();var o=Ct(),l=y(o),b=y(l),g=y(b),d=y(g),S=N(d);{var k=x=>{var _=At();q(x,_)};M(S,x=>{h(s()),m(()=>s().required!==!1)&&x(k)})}f(g);var L=N(g,2);{var w=x=>{var _=Et(),O=y(_,!0);f(_),R(()=>C(O,(h(s()),m(()=>s().help)))),q(x,_)};M(L,x=>{h(s()),m(()=>s().help)&&x(w)})}f(b),f(l);var T=N(l,2),I=y(T);{var E=x=>{xt(x,{get question(){return s()},get value(){return c(p)},get otherText(){return c(u)},onChange:i})},H=x=>{var _=ne(),O=Z(_);{var W=K=>{St(K,{get question(){return s()},get value(){return c(p)},get otherText(){return c(u)},onChange:i})},$=K=>{var ye=ne(),Ae=Z(ye);{var Ee=X=>{Nt(X,{get question(){return s()},get value(){return c(p)},onChange:i})},Ce=X=>{var ge=ne(),Re=Z(ge);{var He=ue=>{Qt(ue,{get question(){return s()},get value(){return c(p)},onChange:i})};M(Re,ue=>{h(s()),m(()=>s().type==="text")&&ue(He)},!0)}q(X,ge)};M(Ae,X=>{h(s()),m(()=>s().type==="rating")?X(Ee):X(Ce,!1)},!0)}q(K,ye)};M(O,K=>{h(s()),m(()=>s().type==="multi")?K(W):K($,!1)},!0)}q(x,_)};M(I,x=>{h(s()),m(()=>s().type==="single")?x(E):x(H,!1)})}f(T),f(o),R(()=>C(d,`${h(s()),m(()=>s().prompt)??""} `)),q(e,o),J(),v()}var Ht=A('<p class="mt-1 text-sm text-slate-600"> </p>'),Dt=A('<section class="rounded-2xl border border-slate-200 bg-white p-5 shadow-sm"><h2 class="text-base font-semibold"> </h2> <!> <div class="mt-4 space-y-4"></div></section>');function Mt(e,a){B(a,!1);let t=Q(a,"section",8);F();var r=Dt(),v=y(r),n=y(v,!0);f(v);var p=N(v,2);{var u=i=>{var o=Ht(),l=y(o,!0);f(o),R(()=>C(l,(h(t()),m(()=>t().description)))),q(i,o)};M(p,i=>{h(t()),m(()=>t().description)&&i(u)})}var s=N(p,2);le(s,5,()=>(h(t()),m(()=>t().questions)),i=>i.id,(i,o)=>{Rt(i,{get question(){return c(o)}})}),f(s),f(r),R(()=>C(n,(h(t()),m(()=>t().title)))),q(e,r),J()}var Vt=A('<div class="sticky top-0 z-20 border-b border-slate-200 bg-white/80 backdrop-blur"><div class="mx-auto flex max-w-3xl items-center gap-3 px-4 py-3"><div class="flex-1"><div class="flex items-baseline justify-between"><div class="text-sm font-medium text-slate-900"> </div> <div class="text-xs text-slate-500"> </div></div> <div class="mt-2 h-2 w-full rounded-full bg-slate-100"><div class="h-2 rounded-full bg-slate-900 transition-[width] duration-300"></div></div></div> <button type="button" class="rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm font-medium text-slate-800 hover:bg-slate-100">Reset</button></div></div>');function Pt(e,a){B(a,!1);let t=Q(a,"prog",8),r=Q(a,"lastSavedAt",8),v=Q(a,"onReset",8);function n(L){return new Date(L).toLocaleString()}F();var p=Vt(),u=y(p),s=y(u),i=y(s),o=y(i),l=y(o);f(o);var b=N(o,2),g=y(b);f(b),f(i);var d=N(i,2),S=y(d);f(d),f(s);var k=N(s,2);f(u),f(p),R(L=>{C(l,`${h(t()),m(()=>t().pct)??""}% complete`),C(g,`Saved: ${L??""}`),dt(S,`width: ${h(t()),m(()=>t().pct)??""}%`)},[()=>(h(r()),m(()=>n(r())))]),P("click",k,function(...L){v()?.apply(this,L)}),q(e,p),J()}function Wt(e){const a={questionnaireId:D.id,submittedAt:new Date().toISOString(),answers:e.answers},t=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),v=document.createElement("a");v.href=r,v.download=`questionnaire-submission-${Date.now()}.json`,v.click(),URL.revokeObjectURL(r)}var Yt=A('<p class="mt-2 text-sm text-slate-500"> </p>'),zt=A('<div class="min-h-screen bg-slate-50 text-slate-900"><!> <main class="mx-auto max-w-3xl px-4 pb-24 pt-6"><header class="mb-6"><h1 class="text-2xl font-semibold tracking-tight"> </h1> <p class="mt-2 text-sm text-slate-600"> </p> <!></header> <div class="space-y-6"></div> <div class="mt-10 rounded-2xl border border-slate-200 bg-white p-5 shadow-sm"><h2 class="text-base font-semibold">Finish</h2> <p class="mt-1 text-sm text-slate-600">Your progress is saved automatically on this device.</p> <div class="mt-4 flex flex-wrap items-center gap-3"><button class="rounded-xl bg-slate-900 px-4 py-2 text-sm font-medium text-white hover:bg-slate-800" type="button">Continue</button> <button class="rounded-xl border border-slate-300 bg-white px-4 py-2 text-sm font-medium text-slate-800 hover:bg-slate-100" type="button">Reset</button> <span class="text-sm text-slate-500"> </span></div></div></main></div>');function Ut(e,a){B(a,!1);const t=()=>Te(de,"$quizState",r),[r,v]=Ne(),n=U();function p(){Wt(t()),alert("Your responses have been downloaded. Please send the file as instructed.")}function u(){confirm("Reset all answers? This will clear your saved progress on this device.")&&(vt(),scrollTo({top:0,behavior:"smooth"}))}j(()=>t(),()=>{G(n,ft(t()))}),ie(),F();var s=zt(),i=y(s);Pt(i,{get prog(){return c(n)},get lastSavedAt(){return t(),m(()=>t().lastSavedAt)},onReset:u});var o=N(i,2),l=y(o),b=y(l),g=y(b,!0);f(b);var d=N(b,2),S=y(d,!0);f(d);var k=N(d,2);{var L=O=>{var W=Yt(),$=y(W);f(W),R(()=>C($,`Estimated completion time: ${h(D),m(()=>D.estimatedMinutes)??""} minutes`)),q(O,W)};M(k,O=>{h(D),m(()=>D.estimatedMinutes)&&O(L)})}f(l);var w=N(l,2);le(w,5,()=>(h(D),m(()=>D.sections)),O=>O.id,(O,W)=>{Mt(O,{get section(){return c(W)}})}),f(w);var T=N(w,2),I=N(y(T),4),E=y(I),H=N(E,2),x=N(H,2),_=y(x);f(x),f(I),f(T),f(o),f(s),R(()=>{C(g,(h(D),m(()=>D.title))),C(S,(h(D),m(()=>D.intro))),E.disabled=(c(n),m(()=>c(n).pct<100)),re(E,"title",(c(n),m(()=>c(n).pct<100?"Complete required questions to enable submission.":"Ready"))),C(_,`Required answered: ${c(n),m(()=>c(n).answered)??""} / ${c(n),m(()=>c(n).total)??""} (${c(n),m(()=>c(n).pct)??""}%)`)}),P("click",E,p),P("click",H,u),q(e,s),J(),v()}function Zt(e){Ut(e,{})}export{Zt as component};
