import{a as x,f as $}from"../chunks/3MeJAyDi.js";import{i as mt}from"../chunks/Biedmao3.js";import{S as ht,T as xt,W as s,Y as a,w as t,Z as i,I as F,X as b,$ as k,_ as O,a2 as $t,a6 as z,a7 as D}from"../chunks/CiiSKS_t.js";import{e as jt,s as d}from"../chunks/DNPCJNaY.js";import{i as H}from"../chunks/D0zR2ufV.js";import{e as T,i as E}from"../chunks/hyMIDi62.js";var bt=$('<p class="muted svelte-83i92j"> </p>'),St=$("<li><strong> </strong> </li>"),Ft=$("<li><strong> </strong> </li>"),kt=$('<div class="rank-item svelte-83i92j"><div><strong> </strong> <p class="small svelte-83i92j"> </p></div> <div class="score-badge svelte-83i92j"> </div></div>'),Ot=$("<li><strong> </strong> </li>"),Ct=$("<li> </li>"),wt=$('<div class="concerns svelte-83i92j"><h3 class="svelte-83i92j">Concerns / Safeguards Raised</h3> <ul></ul></div>'),yt=$('<div class="card svelte-83i92j"><h2 class="svelte-83i92j">Current State Confidence (Average)</h2> <ul><li><strong>Trust:</strong> </li> <li><strong>Completeness:</strong> </li> <li><strong>Ownership:</strong> </li> <li><strong>Monitoring:</strong> </li></ul></div> <div class="card svelte-83i92j"><h2 class="svelte-83i92j">Top 5 Minimum Baseline Fields (Weighted)</h2> <ul></ul></div> <div class="card svelte-83i92j"><h2 class="svelte-83i92j">Top 5 Friction Factors (Weighted)</h2> <ul></ul></div> <div class="card svelte-83i92j"><h2 class="svelte-83i92j">Initiative Prioritisation (Averaged)</h2> <!></div> <div class="card svelte-83i92j"><h2 class="svelte-83i92j">AI Governance Appetite</h2> <ul></ul> <!></div>',1),At=$('<div class="container svelte-83i92j"><header class="svelte-83i92j"><h1>Aggregated Workshop Summary</h1> <input type="file" multiple accept="application/json"/> <!></header> <!></div>');function Rt(rt,it){ht(it,!1);let w=F([]),y=F({}),A=F({}),I=F({}),W=F([]),u=F({trust:0,completeness:0,ownership:0,monitoring:0}),M=0,j={},R=F([]);function st(e){const r=e.target;if(!r.files)return;const o=Array.from(r.files).map(p=>p.text().then(g=>JSON.parse(g)));Promise.all(o).then(p=>{b(w,p),at()})}function at(){b(y,{}),b(A,{}),b(I,{}),b(W,[]),j={},b(R,[]),b(u,{trust:0,completeness:0,ownership:0,monitoring:0}),M=0;for(const e of t(w)){if(e.frictionOrder){const r=e.frictionOrder.length;e.frictionOrder.forEach((o,p)=>{const g=r-p;k(y,t(y)[o.label]=(t(y)[o.label]??0)+g)})}if(e.minimumFieldOrder){const r=e.minimumFieldOrder.length;e.minimumFieldOrder.forEach((o,p)=>{const g=r-p;k(A,t(A)[o.label]=(t(A)[o.label]??0)+g)})}if(e.aiSelection&&k(I,t(I)[e.aiSelection]=(t(I)[e.aiSelection]??0)+1),e.aiConcerns&&e.aiConcerns.trim().length>0&&t(W).push(e.aiConcerns.trim()),e.currentState&&(k(u,t(u).trust+=e.currentState.trust??0),k(u,t(u).completeness+=e.currentState.completeness??0),k(u,t(u).ownership+=e.currentState.ownership??0),k(u,t(u).monitoring+=e.currentState.monitoring??0),M++),e.priorities)for(const r of e.priorities)j[r.title]||(j[r.title]={impact:0,effort:0,risk:0,count:0}),j[r.title].impact+=r.impact,j[r.title].effort+=r.effort,j[r.title].risk+=r.risk,j[r.title].count++}b(R,Object.entries(j).map(([e,r])=>{const o=r.impact/r.count,p=r.effort/r.count,g=r.risk/r.count,G=o*2-p-g;return{title:e,impact:o.toFixed(2),effort:p.toFixed(2),risk:g.toFixed(2),score:G.toFixed(2)}}).sort((e,r)=>Number(r.score)-Number(e.score)))}function N(e){return M?(e/M).toFixed(2):"â€“"}function K(e){return Object.entries(e).sort((r,o)=>o[1]-r[1]).slice(0,5)}mt();var P=At(),B=a(P),Q=s(a(B),2),ot=s(Q,2);{var lt=e=>{var r=bt(),o=a(r);i(r),O(()=>d(o,`${t(w).length??""} submissions loaded.`)),x(e,r)};H(ot,e=>{t(w).length&&e(lt)})}i(B);var nt=s(B,2);{var vt=e=>{var r=yt(),o=$t(r),p=s(a(o),2),g=a(p),G=s(a(g));i(g);var J=s(g,2),ct=s(a(J));i(J);var L=s(J,2),dt=s(a(L));i(L);var U=s(L,2),ut=s(a(U));i(U),i(p),i(o);var X=s(o,2),V=s(a(X),2);T(V,5,()=>K(t(A)),E,(_,l,f)=>{var n=z(()=>D(t(l),2));let h=()=>t(n)[0],v=()=>t(n)[1];var c=St(),m=a(c),S=a(m);i(m);var C=s(m);i(c),O(()=>{d(S,`${f+1}. ${h()??""}`),d(C,` (score: ${v()??""})`)}),x(_,c)}),i(V),i(X);var Y=s(X,2),tt=s(a(Y),2);T(tt,5,()=>K(t(y)),E,(_,l,f)=>{var n=z(()=>D(t(l),2));let h=()=>t(n)[0],v=()=>t(n)[1];var c=Ft(),m=a(c),S=a(m);i(m);var C=s(m);i(c),O(()=>{d(S,`${f+1}. ${h()??""}`),d(C,` (score: ${v()??""})`)}),x(_,c)}),i(tt),i(Y);var Z=s(Y,2),pt=s(a(Z),2);T(pt,1,()=>t(R),E,(_,l,f)=>{var n=kt(),h=a(n),v=a(h),c=a(v);i(v);var m=s(v,2),S=a(m);i(m),i(h);var C=s(h,2),gt=a(C,!0);i(C),i(n),O(()=>{d(c,`${f+1}. ${t(l).title??""}`),d(S,`Impact: ${t(l).impact??""} | Effort: ${t(l).effort??""} | Risk: ${t(l).risk??""}`),d(gt,t(l).score)}),x(_,n)}),i(Z);var et=s(Z,2),q=s(a(et),2);T(q,5,()=>Object.entries(t(I)),E,(_,l)=>{var f=z(()=>D(t(l),2));let n=()=>t(f)[0],h=()=>t(f)[1];var v=Ot(),c=a(v),m=a(c,!0);i(c);var S=s(c);i(v),O(()=>{d(m,n()),d(S,`: ${h()??""}`)}),x(_,v)}),i(q);var _t=s(q,2);{var ft=_=>{var l=wt(),f=s(a(l),2);T(f,5,()=>t(W),E,(n,h)=>{var v=Ct(),c=a(v,!0);i(v),O(()=>d(c,t(h))),x(n,v)}),i(f),i(l),x(_,l)};H(_t,_=>{t(W).length&&_(ft)})}i(et),O((_,l,f,n)=>{d(G,` ${_??""} / 5`),d(ct,` ${l??""} / 5`),d(dt,` ${f??""} / 5`),d(ut,` ${n??""} / 5`)},[()=>N(t(u).trust),()=>N(t(u).completeness),()=>N(t(u).ownership),()=>N(t(u).monitoring)]),x(e,r)};H(nt,e=>{t(w).length&&e(vt)})}i(P),jt("change",Q,st),x(rt,P),xt()}export{Rt as component};
